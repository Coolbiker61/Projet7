Executing (default): SELECT `id`, `email`, `username`, `isAdmin` FROM `Users` AS `User` WHERE `User`.`id` = 3;
Executing (default): SELECT `id`, `UserId` FROM `Messages` AS `Message` WHERE `Message`.`UserId` = 3;
fin message -------
Executing (default): DELETE FROM `Messages` WHERE `UserId` = 3
Executing (default): SELECT `id` FROM `Likes` AS `Like` WHERE `Like`.`messageId` = 24;
Executing (default): SELECT `id` FROM `Comments` AS `Comment` WHERE `Comment`.`messageId` = 24;
Executing (default): SELECT `id`, `parent` FROM `Comments` AS `Comment` WHERE `Comment`.`UserId` = 3;
[object SequelizeInstance:Like] like -------
commet id = 41
4
41
42
2
41
1
41
[ 41, 42, 41, 41 ]
fin comment debut like -------------------- ------
Executing (default): DELETE FROM `Likes` WHERE `messageId` = 24
Executing (default): DELETE FROM `Comments` WHERE `id` IN (41, 42, 41, 41)
Executing (default): SELECT `id`, `parent` FROM `Comments` AS `Comment` WHERE `Comment`.`parentId` = 41;
Executing (default): SELECT `id`, `parent` FROM `Comments` AS `Comment` WHERE `Comment`.`parentId` = 42;
Executing (default): SELECT `id`, `parent` FROM `Comments` AS `Comment` WHERE `Comment`.`parentId` = 41;
likes of message id=24 destroyed
Executing (default): SELECT `id`, `parent` FROM `Comments` AS `Comment` WHERE `Comment`.`parentId` = 41;
Unhandled rejection Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (_http_outgoing.js:526:11)
    at ServerResponse.header (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:771:10)
    at ServerResponse.send (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:170:12)
    at ServerResponse.json (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:267:15)
    at /home/jackolantern/Bureau/Projet7/backend/controllers/user.js:183:74
    at tryCatcher (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:725:18)
    at _drainQueueStep (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:93:12)
    at _drainQueue (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)

Executing (default): SELECT `id`, `messageId`, `likeType` FROM `Likes` AS `Like` WHERE `Like`.`UserId` = 3;
comment destroyed
Unhandled rejection Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (_http_outgoing.js:526:11)
    at ServerResponse.header (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:771:10)
    at ServerResponse.send (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:170:12)
    at ServerResponse.json (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:267:15)
    at /home/jackolantern/Bureau/Projet7/backend/controllers/user.js:183:74
    at tryCatcher (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:725:18)
    at _drainQueueStep (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:93:12)
    at _drainQueue (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)

Unhandled rejection Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (_http_outgoing.js:526:11)
    at ServerResponse.header (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:771:10)
    at ServerResponse.send (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:170:12)
    at ServerResponse.json (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:267:15)
    at /home/jackolantern/Bureau/Projet7/backend/controllers/user.js:183:74
    at tryCatcher (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:725:18)
    at _drainQueueStep (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:93:12)
    at _drainQueue (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)

Unhandled rejection Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (_http_outgoing.js:526:11)
    at ServerResponse.header (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:771:10)
    at ServerResponse.send (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:170:12)
    at ServerResponse.json (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:267:15)
    at /home/jackolantern/Bureau/Projet7/backend/controllers/user.js:183:74
    at tryCatcher (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:725:18)
    at _drainQueueStep (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:93:12)
    at _drainQueue (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)

0
1
2
3
4
fin destruction like, debut destruc user
Executing (default): DELETE FROM `Likes` WHERE `UserId` = 3
Executing (default): DELETE FROM `Users` WHERE `id` = 3
likes destroyed
Unhandled rejection Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (_http_outgoing.js:526:11)
    at ServerResponse.header (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:771:10)
    at ServerResponse.send (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:170:12)
    at ServerResponse.json (/home/jackolantern/Bureau/Projet7/backend/node_modules/express/lib/response.js:267:15)
    at /home/jackolantern/Bureau/Projet7/backend/controllers/user.js:238:66
    at tryCatcher (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/promise.js:725:18)
    at _drainQueueStep (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:93:12)
    at _drainQueue (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/home/jackolantern/Bureau/Projet7/backend/node_modules/bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)

